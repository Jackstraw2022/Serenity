# CHANGELOG 2019

This changelog documents all Serenity versions published in the year 2019 (versions 3.8.4 through 3.9.14).

## 3.9.14 (2019-12-23)

### Features
- Int64Field now serializes large values into strings, similar to JsonSafeInt64Converter, to prevent precision loss during JavaScript JSON deserialization.
- ValidatePermissions is now called in DeleteRequestHandler just before ValidateRequest, ensuring the Request is accessible there. This change addresses issue #4785.

### Bugfixes
- Fixed syntax errors in the latest changes for permissions in Dialog.scriban and Grid.scriban.

## 3.9.13 (2019-12-10)

### Features
- Added TypeScript code generation for types with the NestedPermissionKeys attribute.
- Introduced the ScriptSkip attribute to optionally skip code generation for certain types and service methods.
- Converted the quick filter bar into a separate component, allowing its use without a data grid.
- Enhanced toolbar buttons to control their visibility and disabled states through the updateInterface handler when a visible/disabled option is set as a function.
- Added a readOnly property and related interface methods to DataGrid. The updateInterface method now calls toolbar.updateInterface for the new tool button disabled/visible methods.
- Added the getInsertPermission method to EntityGrid and ensured the readOnly property is transferred to opened dialogs, if applicable.
- Implemented the readOnly property for entity dialogs.
- Introduced the useViewMode method, which opens entity dialogs in view mode initially and displays an edit button.
- Added getInsertPermission, getUpdatePermission, and getDeletePermission methods to EntityDialog to control button visibility.
- Added the EditorUtils.setContainerReadOnly method, used by entity dialogs to make all form editors read-only in read-only/view modes.
- The server typings generator now generates row permissions in Row.ts.
- Permissions are now used in grid/dialog/row typings generated by sergen.

### Bugfixes
- The jQuery UI tabsshow event has been updated to tabsactivate.

## 3.9.12 (2019-11-12)

### Features
- Added support for NOT "!" and Parenthesis "()" to LogicOperatorPermissionService.
- Enabled thumbnail generation in .NET Core using System.Drawing.Common. If using Linux, ensure to run "sudo apt install libc6-dev" and "sudo apt install libgdiplus".
- Updated TypeScript to version 3.6.4, which is now the recommended version.

### Bugfixes
- Corrected the spelling of "occurred" in error messages.
- Resolved fileSizeDisplay inconsistency.
- In the file upload editor, maxsize now only applies to images.
- The wait cursor is now properly removed after the column picker quick search.
- Ensured datagrid.itemAt returns an object of TItem type, not any.

## 3.9.11 (2019-08-26)

### Features
- Removed mono.cecil from tooling. Please take the latest CodeGenerationHelpers.ttinclude from Serene/StartSharp that doesn't require Cecil reference.
- Added an option to show checkboxes only in certain rows for GridRowSelectionMixin.

### Bugfixes
- Fixed a bug related to clearing slick event handlers.
- Corrected the property grid item order, which might get messed up if tabs and categories are in mixed order (e.g., same category name used in a tab, but separate locations).

## 3.9.10 (2019-07-30)

### Features
- Introduced EntityGridDialog, a combination of EntityGrid and EntityDialog, allowing record editing in a side panel on the grid `(StartSharp)`.
- Completed missing XML documentation for Serenity.Data.
- Changed the error message to suggest IgnoreName instead of NotMapped for skipping property name check with CheckNames.
- Updated packages in the node-based sergen CLI.
- Added a toggle method to Serenity.TabsExtensions.

### Bugfixes
- Fixed an issue where user-changed CustomTemplates via the config UI were not properly used in sergen until a restart.
- Addressed template registration issues when a project directory has a Modules parent directory in the full path.
- **Important!** FluentMigrator output might reveal the connection string in the exception message when migrations fail. Please set CustomErrors=RemoteOnly in your web.config, and ASPNETCORE_ENVIRONMENT to PRODUCTION for .NET Core. Also, apply changes in SiteInitialization.DataMigrations.cs and DataMigrations.cs.

## 3.9.9 (2019-05-24)

### Features
- Introduced SqlSettings.DefaultCommandTimeout global setting to set command timeouts, and connection.SetCommandTimeout extension method to set timeout for a connection (only works with WrappedConnection).
- Made the set of criteria operator constants available in the script side as Serenity.Criteria.Operator.
- Completed missing XML documentation for Serenity.Core.

## 3.9.8 (2019-04-16)

### Bugfixes
- Added missing System.Threading.Tasks.Extensions.dll to the sergen NuGet package, used by Scriban 2.0.

## 3.9.7 (2019-04-15)

### Features
- Updated to ASP.NET Core 2.2. Ensure you install the 2.2 SDK for your Visual Studio version (SDK 2.2.106 for VS 2017, SDK 2.2.203 for VS 2019 as of writing). Updated many packages including Newtonsoft.Json, FakeItEasy, Microsoft.AspNet.Mvc.
- Improved error handling when a property has `[LeftJoin]` or `[InnerJoin]` attribute but no `[ForeignKey]` attribute.

## 3.9.6 (2019-04-05)

### Features
- Added annotation type support, allowing the separation of undesired dependencies, like UI-related attributes, from row properties into an annotation class.
- Introduced AutoColumnWidthMixin, which auto-sizes grid columns based on content width `(StartSharp)`.
- Improved the responsive layout algorithm for data grids on mobile devices.
- The recommended method to ignore checking a property name when form/columns class has a BasedOnRow(CheckNames = true) is now `[IgnoreName]`, not `[NotMapped]` attribute, though the old one still works for compatibility.

## 3.9.5 (2019-03-27)

### Features
- Improved handling of toastr invalid path casing.

## 3.9.4 (2019-03-27)

### Bugfixes
- Fixed syntax error in DotnetCorePathFinder.

## 3.9.3 (2019-03-27)

### Features
- Enhanced handling for NuGet locations in Linux / Mac.

## 3.9.2 (2019-03-27)

### Features
- Skipped packages without ID for dotnet sergen restore, e.g., Microsoft.AspNetCore.App.

## 3.9.1 (2019-03-27)

### Features
- Checked runtimeconfig.dev.json for NuGet folders (attempting to fix Linux / Mac transform issue).

## 3.9.0 (2019-03-15)

### Features
- Added basic attributes to support plugin architecture (work in progress...).
- **`[Breaking Change]`** The Serenity.Web NuGet package no longer contains or references Serenity script, CSS, and image files. You need to manually install the Serenity.Scripts NuGet package in your project after updating. Also, update the Serenity.Web.Assets package. If using AspNetCore, add references to Serenity.Web.Assets and Serenity.Web.Scripts packages in the CSPROJ file next to the Serenity.Web reference.

### Bugfixes
- Fixed StackExchange.Exceptional delete, protect, etc. actions not working properly in ASP.NET Core due to the AntiForgery system `(StartSharp)`.

## 3.8.7 (2019-02-27)

### Features
- Updated bootstrap dependency to 3.4.1.

## 3.8.6 (2019-02-09)

### Features
- Implemented a modern flat design for grids, dialogs, and toolbars `(StartSharp)`.
- When there are items without a tab, instead of showing an empty tab caption, those property items are now created before the tab (thanks @dfaruque).
- Added the ability to register data scripts using classes like lookup scripts.
- Row field value name indexed get access should also look up the field by property name and also in dictionary data if available.
- Made target optional for PropertyGrid.save, which now returns the new/passed target object. Added value property to PropertyGrid.

## 3.8.5 (2019-01-03)

### Bugfixes
- Ensured not-mapped fields populated by MasterDetailRelation or LinkingSetRelation are only loaded if explicitly included (e.g., column is visible) for ListRequestHandler and loaded in default Details mode for RetrieveRequestHandler.

## 3.8.4 (2019-01-02)

### Bugfixes
- Fixed in-place add script error in lookup editor.